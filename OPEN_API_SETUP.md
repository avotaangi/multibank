# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Open API - –°—Ç–∞—Ç—É—Å

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã –∫ Backend
- ‚úÖ `/api/consents` - —Å–æ–≥–ª–∞—Å–∏—è (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)
- ‚úÖ `/api/payments` - –ø–ª–∞—Ç–µ–∂–∏ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)
- ‚úÖ `/api/products` - –ø—Ä–æ–¥—É–∫—Ç—ã (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç)

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã Frontend API –º–µ—Ç–æ–¥—ã
- ‚úÖ `consentsAPI` - –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–≥–ª–∞—Å–∏–π
- ‚úÖ `productsAPI` - –ø—Ä–æ–¥—É–∫—Ç—ã –∏ –¥–æ–≥–æ–≤–æ—Ä—ã
- ‚úÖ `bankingAPI` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–Ω–∫–∞—Ö –∏ —Ç–æ–∫–µ–Ω—ã
- ‚úÖ `accountAPI.getBankingAccounts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ API

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è Backend
- ‚úÖ `GET /api/auth/banks` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∞–Ω–∫–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞)
- ‚úÖ `POST /api/auth/bank-token` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–∞–Ω–∫–∞ (–∑–∞–≥–ª—É—à–∫–∞)

---

## üìã –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Open API

### 1. Open Banking API
**–ë–∞–Ω–∫–∏:**
- VBank: `https://vbank.open.bankingapi.ru`
- ABank: `https://abank.open.bankingapi.ru`
- SBank: `https://sbank.open.bankingapi.ru`

**Endpoints:**
- `/auth/bank-token` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `/accounts` - —Å—á–µ—Ç–∞
- `/accounts/{account_id}/balances` - –±–∞–ª–∞–Ω—Å—ã
- `/accounts/{account_id}/transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `/payments` - –ø–ª–∞—Ç–µ–∂–∏
- `/account-consents` - —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ —Å—á–µ—Ç–∞–º
- `/payment-consents` - —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –ø–ª–∞—Ç–µ–∂–∏
- `/products` - –ø—Ä–æ–¥—É–∫—Ç—ã
- `/product-agreements` - –¥–æ–≥–æ–≤–æ—Ä—ã —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- `/product-agreement-consents` - —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏

### 2. Rewards API
**URL:** `https://api.bankingapi.ru/api/rb/rewardsPay/hackathon/v1`

**Endpoints:**
- `GET /cards/accounts/external/{externalAccountID}/rewards/balance`
- `POST /cards/accounts/external/{externalAccountID}/rewards/redemption`

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
1. –°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ Telegram User ID ‚Üí client_id (team096-{0..9})
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–≤—è–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
3. –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã `bankingClient`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `client_id` –ø–æ Telegram User ID
2. –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `client_id` –ø—Ä–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ Open Banking API

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ endpoints —á–µ—Ä–µ–∑ Postman/curl
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∑–∞–≥–ª—É—à–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã Open Banking API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç (ES modules)
- –ó–∞–≥–ª—É—à–∫–∏ –≤ `/api/auth/banks` –∏ `/api/auth/bank-token` –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- `client_id` —Å–µ–π—á–∞—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `team096-${telegramUserId % 10}` –≤ `authStore.getClientId()`
- –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (0-9) –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º Telegram

